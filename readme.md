Hardware-in-the-loop testing